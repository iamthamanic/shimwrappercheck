#!/usr/bin/env bash
set -euo pipefail

# Find package root (where scripts/git-checked.sh lives); works when run via node_modules/.bin/git
WRAPPER_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
while [[ ! -f "$WRAPPER_DIR/scripts/git-checked.sh" ]] && [[ "$WRAPPER_DIR" != "/" ]]; do
  WRAPPER_DIR="$(dirname "$WRAPPER_DIR")"
done
if [[ ! -f "$WRAPPER_DIR/scripts/git-checked.sh" ]]; then
  echo "Error: scripts/git-checked.sh not found from $(dirname "${BASH_SOURCE[0]}")" >&2
  exit 1
fi
exec "$WRAPPER_DIR/scripts/git-checked.sh" "$@"
